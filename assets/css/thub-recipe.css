/* ===========================
   [THUB_CSS] Stili pagina ricetta
   =========================== */

.thub-recipe{padding:24px 0;}
.thub-box{background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;margin:16px 0;}

.thub-hero{display:grid;grid-template-columns:1.2fr 1fr;gap:20px;align-items:center;}
.thub-hero__title{font-size:clamp(24px,3.2vw,34px);margin:0 0 8px;}
.thub-hero__intro{color:#444;margin:8px 0 12px;}
.thub-hero__media img{width:100%;height:auto;border-radius:12px;display:block;}

.thub-sponsor-claim{display:flex;align-items:center;gap:10px;margin:6px 0 10px;}
.thub-sponsor-claim__logo{width:28px;height:28px;object-fit:contain;}
.thub-sponsor-claim__text{font-weight:600;}
.thub-sponsor-claim__link{font-size:.9rem;text-decoration:none;border-bottom:1px dashed currentColor;}

.thub-meta{display:flex;flex-wrap:wrap;gap:10px;padding:0;margin:8px 0;list-style:none;color:#333}
.thub-meta li{background:#f7f7f7;border-radius:999px;padding:6px 10px;font-size:.9rem;}

.thub-porzioni-ui{display:flex;align-items:center;gap:8px;margin-top:8px;}
.thub-porzioni-ui input{width:64px;text-align:center;padding:6px 8px;border:1px solid #ddd;border-radius:8px;}
.thub-porzioni-ui button{border:1px solid #ddd;background:#fafafa;border-radius:8px;padding:6px 10px;cursor:pointer}
.thub-porz-quick button{margin-left:6px;}

.thub-ingredients ul{list-style:none;padding:0;margin:0}
.thub-ing{display:grid;grid-template-columns:80px 90px 1fr;gap:8px;padding:8px 0;border-bottom:1px dashed #eee}
.thub-ing__qta{font-variant-numeric:tabular-nums}

.thub-tools__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}
.thub-tool{display:grid;place-items:center;text-align:center;padding:10px;border:1px dashed #eee;border-radius:10px}
.thub-tool__icon svg{width:36px;height:36px}
.thub-tool__text{font-size:.9rem;margin-top:6px}

.thub-steps ol{padding-left:20px}

.thub-variants .thub-variants__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.thub-carousel{display:grid;grid-auto-flow:column;grid-auto-columns: clamp(260px, 48%, 360px);gap:16px;overflow:auto;scroll-snap-type:x mandatory;padding-bottom:8px}
.thub-variant{scroll-snap-align:start;border:1px solid #eee;border-radius:12px;padding:10px;background:#fff}
.thub-variant img{width:100%;height:auto;border-radius:10px;margin-bottom:8px}
.thub-carousel__nav button{border:1px solid #ddd;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}

.thub-cta-pro{background:#f7f2ff;border:1px solid #e6dafc;padding:12px;border-radius:10px;margin-top:10px}
.thub-btn{display:inline-block;border:1px solid #7249a4;padding:8px 12px;border-radius:10px;text-decoration:none}
.thub-btn--pro{background:#7249a4;color:#fff}
.thub-actions{display:flex;gap:10px;margin-top:12px}
.thub-actions .is-locked{opacity:.6;position:relative;cursor:not-allowed}
.thub-actions .is-locked.show-tip::after{
  content: attr(data-thub-tooltip);
  position:absolute;top:-32px;left:50%;transform:translateX(-50%);
  background:#111;color:#fff;font-size:.8rem;padding:4px 8px;border-radius:6px;white-space:nowrap
}

/* [THUB_a11y] Focus ring per navigazione da tastiera sui bottoni della ricetta */
.thub-porzioni-ui button:focus-visible,
.thub-carousel__nav button:focus-visible,
.thub-btn:focus-visible,
.thub-actions .thub-btn:focus-visible{
  outline: 2px solid var(--violet);
  outline-offset: 2px;
}

/* Responsive */
@media (max-width: 920px){
  .thub-hero{grid-template-columns:1fr}
}

/* [THUB_ingredienti_mobile] Layout ingredienti più stretto su schermi piccoli */
@media (max-width:560px){
  .thub-ing{ grid-template-columns:72px 80px 1fr; } /* qta | unità | nome ingrediente */
}

/* Print (il tuo tema già nasconde header/footer): solo ripuliamo margini */
@media print{
  .thub-actions, .thub-variants, .thub-cta-pro{display:none !important;}
  body{background:#fff;}
  .thub-box{border:0;padding:0;margin:0 0 8px 0;}
}

/* [THUB_varianti] Utility frecce nascoste quando non servono */
.thub-carousel__nav.is-hidden{ display:none !important; }

/* [THUB_varianti] Nascondi direttamente i pulsanti quando .is-hidden */
.thub-carousel__prev.is-hidden,
.thub-carousel__next.is-hidden{
  display: none !important;
}

/* [THUB_varianti] Scorrimento fluido del carousel (migliora UX su desktop) */
.thub-carousel{ scroll-behavior: smooth; }

/* [THUB_varianti] Inerzia/scorrimento “elastico” su Safari iOS (momentum scrolling) */
.thub-carousel{ -webkit-overflow-scrolling: touch; }

/* ============================================================
   [THUB_TTS_BTN_INLINE] — Bottone TTS inline nell’H1
   ============================================================ */
.ricetta-title .thub-tts-btn--inline{
  display: inline-grid;
  place-items: center;
  width: 1.6em;
  height: 1.6em;
  margin-left: 0.35em;
  vertical-align: -0.15em;
  border-radius: 9999px;
  border: 1px solid #e6e6ea;
  background: #fff;
  color: #333;
  cursor: pointer;
  transition: background .15s ease, box-shadow .15s ease, transform .1s ease;

  line-height: 1;    /* NEW: evita extra-spazio verticale */
  padding: 0;        /* NEW: nessun padding interno */
  box-sizing: content-box; /* NEW: misura “pura” senza interferenze */
}
.ricetta-title .thub-tts-btn--inline svg{
  display:block; 
  width: 1em; height: 1em;
  /* Nudge ottico: sposta di una frazione di px (ritocca a gusto: 0.25–1px) */
  transform: translateY(0.5px); /* NEW: centering fine */
}
.ricetta-title .thub-tts-btn--inline:hover{
  background: #f7f5fb;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
  transform: translateY(-1px);
}
.ricetta-title .thub-tts-btn--inline svg{ display:block; }

/* Dark mode */
body.thub-theme-dark .ricetta-title .thub-tts-btn--inline{
  background:#1a1c22; border-color:#2b2f38; color:#e9eaf0;
}
body.thub-theme-dark .ricetta-title .thub-tts-btn--inline:hover{
  background:#23262f; border-color:#3a3f4b;
}

/* Stato attivo (lettura in corso) */
.ricetta-title .thub-tts-btn--inline.is-on{
  border-color:#7249a4;
  box-shadow: 0 0 0 2px rgba(114,73,164,.15);
}

/* Focus ring coerente anche sul pulsante TTS */
.ricetta-title .thub-tts-btn--inline:focus-visible{
  outline: 2px solid var(--violet);
  outline-offset: 2px;
}

/* ============================================================
   [THUB_FAV_TOGGLE_CSS] Stile pulsante Preferiti accanto a Stampa/Condividi
   - Allineato alla famiglia .thub-btn esistente, con lieve evidenza quando attivo
   ============================================================ */

.thub-actions .thub-btn--fav{
  display:inline-flex; align-items:center; gap:.35rem;
  border:1px solid var(--violet, #7249a4); color:var(--violet, #7249a4);
  background:#fff; border-radius:.6rem;
  padding:.45rem .6rem; line-height:1; cursor:pointer;
}
.thub-actions .thub-btn--fav:hover{ background:#f7f5fb; }
.thub-actions .thub-btn--fav[aria-pressed="true"],
.thub-actions .thub-btn--fav.is-on{
  background:#f2eef7;
}
.thub-actions .thub-btn--fav svg{ width:18px; height:18px; display:block; }

/* [THUB_FAV_ALIAS] allinea .btn-fav ai bottoni azione esistenti */
.ricetta-actions .btn-fav{
  display:inline-flex; align-items:center; gap:.35rem;
  border:1px solid var(--violet,#7249a4); color:var(--violet,#7249a4);
  background:#fff; border-radius:.6rem;
  padding:.45rem .6rem; line-height:1; cursor:pointer;
}
.ricetta-actions .btn-fav:hover{ background:#f7f5fb; }
.ricetta-actions .btn-fav[aria-pressed="true"], .ricetta-actions .btn-fav.is-on{ background:#f2eef7; }

/* [THUB_LOCK_TOOLTIP_ALIAS] supporta anche container legacy */
.ricetta-actions .is-locked.show-tip::after{
  content: attr(data-thub-tooltip);
  position:absolute; top:-32px; left:50%; transform:translateX(-50%);
  background:#111; color:#fff; font-size:.8rem; padding:4px 8px; border-radius:6px; white-space:nowrap;
}